<html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content=""/>
    <meta name="author" content="Namdak Tonpa"/>
    <title>2019-07-01</title>
    <link rel="stylesheet" href="../../blank.css?v=11"/>
</head>
<body>
<nav>
    <a href='../../index.html'>5HT</a>
    <a href='../index.html'>TOP</a>
    <a href='#'>2019-07-01</a>
</nav>
<main>
    <section>
        <h3>Часть 2. Общая структура</h3>

        <p>— <a href="2019-06-30%20DEPOT.htm">Часть 1. Введение</a><br>
           — <a href="2019-07-01%20ERP%20MOD.htm">Часть 2. Общая структура</a><br>
           — <a href="2019-07-08%20ERP%20BOOT.htm">Часть 3. Первичные цепочки</a><br>
           — <a href="2019-07-08%20KVS%20ADM.htm">Часть 4. Администратор данных</a><br>
           — <a href="2019-07-09%20BPE%20ADM.htm">Часть 5. Администратор процессов</a><br>
           — <a href="2019-07-17%20ENT%20APP.htm">Часть 6. Структура приложения</a><br>
           — <a href="2019-07-19%20ENT%20PUB.htm">Часть 7. Публикация в GCP</a></p>

        <p>В этой статье я расскажу из чего состоит модуль предприятия.</p>

    </section>
    <section>
        <h3>Директория модуля</h3>

        <p>Если рассматривать первичную гранулярность предприятия, которое
           в первом приближении состоит из модулей, то уже на примере PLM
           мы можем обнаружить полную структуру типового модуля, каждый элемент
           из которой представлен в экземпляре PLM.</p>

        <h4>Конфигурация</h4>

        <p>Первый и главный компонент приложения, его файл конфигурации
           (для Erlang — <b>sys.config</b>, для Elixir — <b>consig.exs</b>)
           который нужен для множества приложений-зависимостей: <b>n2o</b>, <b>kvs</b>, <b>erp</b>, <b>form</b>.
           Это обязательный компонент любого эрланг приложения которое
           нуждается в этих зависиомостях.</p>

        <p>Более подробно про конфигурацию Erlang и Elixir приложений можно почитать тут:</p>

        <p>— <a href="https://erlang.org">Erlang</a><br>
           — <a href="https://elixir-lang.org">Elixir</a></p>

        <h4>Публикация</h4>

        <p>Для построение релиза, обычного запуска или публикации в hex.pm
           с помощью <b>mad</b>, <b>mix</b> или <b>rebar3</b>
           вам необходимо файл публикации (для Erlang — <b>rebar.config</b>,
           для Elixir — <b>mix.exs</b>). Файл публикации содержил план запуска приложений.</p>

        <p>Более подробно про публикацию Erlang и Elixir приложений можно почитать тут:</p>

        <p>— <a href="https://mad.n2o.space">mad</a> (Erlang)<br>
           — <a href="https://www.rebar3.org">rebar3</a> (Erlang)<br>
           — <a href="https://elixir-lang.org/getting-started/mix-otp/introduction-to-mix.html">mix</a> (Elixir)</p>

        <h4>Типовые спецификации</h4>

        <p>Типовая спецификация — это совокупность определений типов (type),
           записей (record) и спецификаций функций (spec). Это информация для диалайзера,
           который помогает определить несоотвествие кода этим спецификациям. Все системы
           сборки поддерживают проверку dialyzer.</p>

        <p>В типовых спецификациях мы храним внутренние структуры
           фреймворков и приложений, а также бизнес-объектов предприятия.
           Язык описания бизнес объектов поддерживает кортежи (для сообщений)
           суммы (для протоколов), скалярные и векторные типы (для полей).</p>

        <p>Типовые спецификации хранятся в папке <b>include</b>, которая
           содержит HRL файлы, которые содержат типовые спецификации.
           Все -spec, -record, -type определения должны быть здесь. В Elixir
           импортируйте их с помощью <b>Record.extract</b>.</p>

        <p>Если приложение не содержит include папки (как например PLM модуль),
           то это означает, что модуль не определяет никаких дополнительных типов,
           а пользуется типами своих зависимостей либо не пользуется ими вообще.</p>

        <p>Более подробно про типовые спецификации и поддерживаемые языки программирования
           можно почитать тут:</p>

        <p>— <a href="https://bert.n2o.space">bert</a></p>

        <h4>Протоколы</h4>

        <p>Если приложение реализует какой-то протокол, это протокол встраивается
           в протокольные циклы n2o_mqtt, n2o_ws, n2o_tcp распределеннонго кольца воркеров
           которые обслуживают запросы клиентских приложений.</p>

        <p>Список протоколов определяется в переменной protocols библиотеки N2O:</p>

        <figure><code>
  protocols:
  [
    :n2o_heart,
    :n2o_nitro,
    :n2o_ftp,
    :bpe_n2o,
    CHAT.TXT
  ]
        </code></figure>

        <p>А список воркеров которые реализуют эти протоколы на эндпойнтах:</p>

        <figure><code>
  mqtt_services: ['erp', 'plm'],
  ws_services: ['chat'],
        </code></figure>

        <p>Протоколы, если они реализованы приложенинем,
           находятся в папке <b>src/protos</b> или <b>lib/protos</b>
           для Erlang и Elixir соответственно.</p>

        <p>Более подробно про N2O протоколы и их использование
           можно почитать тут:</p>

        <p>— <a href="https://ws.n2o.space">n2o</a></p>

        <h4>Цепочки</h4>

        <p>Все данные типизированные типовыми спецификациями хранятся в KVS хранилище.
           Это Erlang-ориентированная абстракция над записями/кортежами (records, tuples, C-structures) которая
           позволяется прятать за единым интерфейсом несколько KV хранилищ (включая
           Mnesia, RocksDB, Cassandra).</p>

        <p>Более подробно про систему хранениня KVS и управление типовыми спецификациями
           можно почитать тут:</p>

        <p>— <a href="https://kvs.n2o.space">kvs</a></p>

        <h4>Процессы</h4>

        <p></p>

        <p>Более подробно про систему управления бизнес-процессами BPE и ее использование
           можно почитать тут:</p>

        <p>— <a href="https://bpe.n2o.space">bpe</a></p>

        <h4>Страницы</h4>
        <h4>Редакторы</h4>
        <h4>Векторы</h4>
        <h4>Роутер</h4>

        <p>Более подробно про веб-фреймворк NITRO
           можно почитать тут:</p>

        <p>— <a href="https://nitro.n2o.space">nitro</a></p>

    </section>
</main>
<footer>Namdak Tonpa <span class="heart">&nbsp;❤&nbsp;</span> 2009—2019</footer>
</body>
</html>
